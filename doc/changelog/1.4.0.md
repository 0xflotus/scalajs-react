## 1.4.0

* Add `AsyncCallback` which is like a pure version of Scala's `Future` and JS's `Promise`.
  Asynchronous code can be composed using `for`-comprehensions as if it's synchronous,
  it can even be composed to run sequentially or concurrently. In fact you can see an example
  of running a bunch of AJAX calls in parallel [here in this new demo](https://japgolly.github.io/scalajs-react/#examples/ajax-2).

* React 16.6 & 16.7 support
  * Added `React.Suspense`.
    For technical reasons (types, power, constraints) `React.lazy` is not added nor needed in Scala;
    use the new `AsyncCallback` instead.
  * The new `getDerivedStateFromError` has *not* been implemented, and cannot be until facebook/react#13986 is merged.

* `Callback` changes
  * `.attemptTry` now catches all types of exception
  * Add `.memo` which memoises the result
  * Change the following to return a `AsyncCallback[A]` instead of `CallbackTo[Future[A]]`:
    * `.async`
    * `.delay`
    * `.delayMs`
  * Deprecate `.toFuture` in favour of `.asAsyncCallback.unsafeToFuture()`

* Add to `Ajax`:
  * `def asAsyncCallback: AsyncCallback[XMLHttpRequest]`
  * `def validateResponse          (XMLHttpRequest => Boolean)(AjaxException => Callback): Ajax`
  * `def validateStatus            (Int => Boolean)           (AjaxException => Callback): Ajax`
  * `def validateStatusIs          (Int)                      (AjaxException => Callback): Ajax`
  * `def validateStatusIsSuccessful                           (AjaxException => Callback): Ajax`

* Removed methods deprecated < 1.2.0

* Dependency upgrades:
  * Cats 1.5.0
  * Scala 2.12.8
  * Scalaz 7.2.27
  * Sourcecode 0.1.5

# Migration

```
# Replace .(async|delay|delayMs) on Callback

find . -type f -name '*.scala' -exec perl -pi -e '
  s/([. ])((?:async|delay|delayMs) *\([^()]+\))/$1$2$1asCallbackToFuture/;
  s/asCallbackToFuture[. ]void/toCallback/;
' {} +
```


# TODO

* `React.memo`
  * Move Reusability into core
  * Add `React.memo`
  * Add `.memo` (?) to `JsFnComponent`
  * Test from `ScalaFnComponent`
* VDOM revision
  * #509: Certain vdom implicits shouldn't require imports should
  * #508: Application of html attr to VdomElement allowed but don't work
* SSR stuff
* Rename `.runNow()` to `.unsafeRunNow()`?
